<div class="min-h flex justify-between flex-col rounded-lg bg-gray-200 overflow-hidden text-white relative"
    [ngStyle]="timelineList().length > 0 ? {'min-height': 'fit-content'} : {'min-height': '120px'}">

    <div class="dark-overlay absolute top-0 left-0 h-full bg-black opacity-30 pointer-events-none z-10"
        [ngStyle]="{ width: cursorPosition + 'px' }"></div>

    <div class="flex justify-between border-b-[1px] border-gray-400 bg-gray-700">
        <div *ngFor="let second of createArray(totalDuration()); let i = index; let last = last"
            class="text-white border-gray-400 border-r-2 flex-1 pt-1 text-center"
            [class.!border-r-0]="last">
            {{ i }}
        </div>
    </div>

    <div class="flex flex-1 items-stretch py-1 relative"
        id="timeline"
        cdkDropList
        cdkDropListOrientation="horizontal"
        #timeline="cdkDropList"
        [cdkDropListData]="timelineList()"
        [cdkDropListConnectedTo]="['scenes']"
        (cdkDropListDropped)="onDrop($event)">

        <div *ngFor="let file of timelineList(); let i = index; let last = last"
            class="timeline-item flex overflow-hidden gap-1"
            cdkDrag
            [style.flexGrow]="file.duration"
            style="flex-basis: 0;">
            <div class="flex flex-1 flex-col items-center justify-center"
                [class.!border-r-0]="last"
                *ngFor="let frame of file.frames; let s = index">
                <img [src]="frame"
                    alt="Frame"
                    class="object-cover" />
            </div>
        </div>

        <div class="cursor-wrapper absolute top-0 h-full z-50 flex items-center"
            [ngStyle]="{ left: cursorPosition + 'px' }"
            (mousedown)="startDragging($event)">
            <div class="cursor bg-orange-500 h-full w-[2px]"></div>
            <div class="cursor-tail bg-orange-500 w-4 h-4 rounded-full ml-[-6px] cursor-pointer"></div>
        </div>
    </div>

    <div class="flex justify-between border-t-[1px] border-gray-400 bg-gray-700">
        <div *ngFor="let second of createArray(totalDuration()); let i = index; let last = last"
            class="text-white border-gray-400 border-r-2 flex-1 pt-1 text-center"
            [class.!border-r-0]="last">
            {{ i }}
        </div>
    </div>
</div>